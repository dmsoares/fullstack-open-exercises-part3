(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(16),c=n.n(u),o=(n(23),n(17)),i=n(6),l=n(2),m=function(e){var t=e.applyFilter,n=e.filter;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{onChange:function(e){t(e.target.value.toLowerCase())},value:n}))},f=function(e){var t=e.handleOnSubmit,n=e.handleName,r=e.handleNumber,u=e.name,c=e.number;return a.a.createElement("form",{onSubmit:function(e){return t(e)}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{id:"name-input",onChange:function(e){return n(e.target.value)},value:u,autoFocus:!0})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:function(e){return!/[^\d\-\s]|\s\s+|--+|^-|^\s|\s-+|-\s+/g.test(e.target.value)&&r(e.target.value)},value:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},s=function(e){var t=e.selectPersons,n=e.removePerson;return t().map((function(e){return a.a.createElement("div",{key:e.name},a.a.createElement("label",null,e.name," ",e.number," "),a.a.createElement("button",{onClick:function(){return n(e.id)}},"delete"))}))},d=function(e){var t=e.message;if(null===t)return null;var n={};return"success"===t.type&&(n={color:"green"}),"error"===t.type&&(n={color:"red"}),a.a.createElement("div",{className:"notification",style:n},t.text)},b=n(4),h=n.n(b),p="/api/persons",v=function(){return h.a.get(p).then((function(e){return e.data}))},E=function(e,t){return h.a.post(p,{name:e,number:t}).then((function(e){return e.data}))},y=function(e){return h.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},O=function(e,t){return h.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},j=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],u=t[1],c=Object(r.useState)(""),b=Object(l.a)(c,2),h=b[0],p=b[1],j=Object(r.useState)(""),g=Object(l.a)(j,2),w=g[0],S=g[1],k=Object(r.useState)(""),x=Object(l.a)(k,2),C=x[0],N=x[1],P=Object(r.useState)(null),D=Object(l.a)(P,2),F=D[0],I=D[1];Object(r.useEffect)((function(){v().then((function(e){return u(e)}))}),[]);var J=function(e){I(e),setTimeout((function(){return I(null)}),5e3)};return a.a.createElement("div",null,a.a.createElement(d,{message:F}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(m,{applyFilter:N,filter:C}),a.a.createElement("h2",null,"add a new"),a.a.createElement(f,{handleOnSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===h})),r="".concat(h," is already added to phonebook, replace the old number with a new one?");t?window.confirm(r)&&O(t.id,Object(i.a)(Object(i.a)({},t),{},{number:w})).then((function(e){u(n.map((function(n){return n.id===t.id?e:n}))),p(""),S(""),J({text:"Updated number for ".concat(h),type:"success"})})).catch((function(e){u(n.filter((function(e){return e.id!==t.id}))),J({text:"Information of ".concat(h," has already been removed from server"),type:"error"})})):E(h,w).then((function(e){u([].concat(Object(o.a)(n),[e])),p(""),S(""),J({text:"Added ".concat(h),type:"success"})})),document.querySelector("#name-input").focus()},handleName:p,handleNumber:S,name:h,number:w}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(s,{selectPersons:function(){return n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(C)}))},removePerson:function(e){var t=n.find((function(t){return t.id===e})).name;window.confirm("Delete ".concat(t,"?"))&&y(e).then((function(r){u(n.filter((function(t){return t.id!==e}))),J({text:"Deleted ".concat(t),type:"success"})})).catch((function(r){u(n.filter((function(t){return t.id!==e}))),J({text:"Information of ".concat(t," had already been removed from server"),type:"error"})}))}}))};c.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.70781d74.chunk.js.map