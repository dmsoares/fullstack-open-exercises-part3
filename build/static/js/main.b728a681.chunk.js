(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),u=(n(23),n(17)),i=n(6),l=n(2),s=function(e){var t=e.applyFilter,n=e.filter;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{onChange:function(e){t(e.target.value.toLowerCase())},value:n}))},f=function(e){var t=e.handleOnSubmit,n=e.handleName,r=e.handleNumber,o=e.name,c=e.number;return a.a.createElement("form",{onSubmit:function(e){return t(e)}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{id:"name-input",onChange:function(e){return n(e.target.value)},value:o,autoFocus:!0})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:function(e){return!/[^\d\-\s]|\s\s+|--+|^-|^\s|\s-+|-\s+/g.test(e.target.value)&&r(e.target.value)},value:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},d=function(e){var t=e.selectPersons,n=e.removePerson;return t().map((function(e){return a.a.createElement("div",{key:e.id},a.a.createElement("label",null,e.name," ",e.number," "),a.a.createElement("button",{onClick:function(){return n(e.id)}},"delete"))}))},m=function(e){var t=e.message;if(null===t)return null;var n={};return"success"===t.type&&(n={color:"green"}),"error"===t.type&&(n={color:"red"}),a.a.createElement("div",{className:"notification",style:n},t.text)},p=n(4),b=n.n(p),h="http://localhost:3001/api/persons",v=function(){return b.a.get(h).then((function(e){return e.data}))},E=function(e,t){return b.a.post(h,{name:e,number:t}).then((function(e){return e.data}))},y=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},O=function(e,t){return b.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))},g=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),p=Object(l.a)(c,2),b=p[0],h=p[1],g=Object(r.useState)(""),j=Object(l.a)(g,2),w=j[0],x=j[1],S=Object(r.useState)(""),k=Object(l.a)(S,2),C=k[0],N=k[1],P=Object(r.useState)(null),D=Object(l.a)(P,2),F=D[0],I=D[1];Object(r.useEffect)((function(){v().then((function(e){return o(e)}))}),[]);var J=function(e){I(e),setTimeout((function(){return I(null)}),5e3)};return a.a.createElement("div",null,a.a.createElement(m,{message:F}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(s,{applyFilter:N,filter:C}),a.a.createElement("h2",null,"add a new"),a.a.createElement(f,{handleOnSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===b})),r="".concat(b," is already added to phonebook, replace the old number with a new one?");t?window.confirm(r)&&O(t.id,Object(i.a)(Object(i.a)({},t),{},{number:w})).then((function(e){console.log("from personService: ",e.data),o(n.map((function(n){return n.id===t.id?e:n}))),h(""),x(""),J({text:"Updated number for ".concat(b),type:"success"})})).catch((function(e){console.log(e.response.data.error),-1!==e.response.data.error.indexOf("Validation failed")?J({text:e.response.data.error,type:"error"}):(o(n.filter((function(e){return e.id!==t.id}))),J({text:"Information of ".concat(b," has already been removed from server"),type:"error"}))})):E(b,w).then((function(e){o([].concat(Object(u.a)(n),[e])),h(""),x(""),J({text:"Added ".concat(b),type:"success"})})).catch((function(e){console.log(e.response.data),J({text:e.response.data.error,type:"error"})})),document.querySelector("#name-input").focus()},handleName:h,handleNumber:x,name:b,number:w}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(d,{selectPersons:function(){return n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(C)}))},removePerson:function(e){var t=n.find((function(t){return t.id===e})).name;window.confirm("Delete ".concat(t,"?"))&&y(e).then((function(r){o(n.filter((function(t){return t.id!==e}))),J({text:"Deleted ".concat(t),type:"success"})})).catch((function(r){o(n.filter((function(t){return t.id!==e}))),J({text:"Information of ".concat(t," had already been removed from server"),type:"error"})}))}}))};c.a.render(a.a.createElement(g,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.b728a681.chunk.js.map